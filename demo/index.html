<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>$.fn.bsTable</title>
    <link href="../vendor/twbs/bootstrap-icons/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="../vendor/twbs/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container py-5">
    <h1>$.fn.bsTable</h1>
    <hr>
    <div class="" id="toolbar_table"><h2 class="mb-0">Demo Table</h2></div>
    <table id="table"></table>

</div>
<script src="../vendor/components/jquery/jquery.min.js"></script>
<script src="../vendor/twbs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="../dist/bs-table.js"></script>
<script>
    $(document).ready(function () {
        $.getJSON('data.json', function (data) {
            const table = $('#table');
            table.bsTable({
                classes: {
                    table: 'table align-top table-sm table-bordered',
                    thead: 'table-dark h4 text-uppercase',
                    tbody: 'table-group-divider',
                    tfoot: 'table-warning',
                },
                toolbar: '#toolbar_table',
                showFooter: false,
                showHeader: true,
                sortName: 'id',
                sortOrder: 'desc',
                search:true,
                pageSize: 10,
                // url: 'data.json',
                pagination: true,
                data: data,
                paginationVAlign: 'both',
                paginationHAlign: 'end',
                sidePagination: 'client',
                // data: [{
                //     "id": 1,
                // }],
                onPostBody: function (rows) {
                    table.find('table').first().bsTable({
                        classes: {
                            table: 'table align-top table-sm table-bordered',
                            // thead: 'table-secondary',
                            tfoot: 'table-info',
                        },
                        pagination: true,
                        search:false,
                        sidePagination: 'client',
                        paginationVAlign: 'bottom',
                        pageList: null,
                        showRefresh: false,
                        pageSize: 3,
                        data: data,
                        columns: [{
                            sortable: true,
                            title: 'ID2',
                            field: 'id',
                            footerFormatter(dataRow){
                                return 'Total: '+ dataRow.length;
                            }
                        }]
                    })
                },
                columns: [
                    {
                        field: 'id',
                        title: 'ID',
                        align: 'center',
                        visible: true,
                        sortable: true,
                        formatter: function (value, row, index, $td) {
                            if (index % 2 === 0) {
                                $td.addClass('text-bg-dark  border-end fs-1');
                            } else {
                                $td.addClass('text-bg-secondary fs-1');
                            }
                            return value;
                        },
                        events: {
                            'click .badge': function (e, value, row, index) {
                                e.preventDefault();
                                alert($(e.currentTarget).get(0));
                            }
                        }
                    },
                    {
                        sortable: true,
                        title: 'Title',
                        field: 'title',
                    },
                    {
                        sortable: true,
                        class: '',
                        title: 'Body',
                        field: 'body',
                    },
                    {
                        class: 'p-0',
                        title: '',
                        visible:true,
                        field: 'actions',
                        width: '50%',
                        formatter: function (value, row, index, $td) {
                            return '<table></table>';
                        }
                    }
                ]
            });

            // setTimeout(() => {
            //     // $('#table').bsTable('refresh', {pageNumber: 23, pageSize: 3, silent: true});
            //     $('#table').bsTable('showLoading');
            //     setTimeout(() => {
            //         $('#table').bsTable('hideLoading');
            //     },4000)
            // },5000)

            table.on('post-body.bs.table', function (e, data) {
                // console.log('post-body.bs.table', data);
            })
        })

    })
</script>
</body>
</html>
